Cau√£ - "PROJETO 3: BACKEND (API RESTful - Student Core) Nome: API de Gest√£o de Desempenho 
e Reda√ß√µes Objetivo: Criar uma API que gerencie o perfil do aluno, receba os envios de 
reda√ß√£o e forne√ßa dados estat√≠sticos de progresso. üìÖ Cronograma e Sprints (Backend) 
M√™s 1: Identidade e Metas ‚Ä¢ Foco: O aluno precisa existir e ter um objetivo claro no sistema.
‚Ä¢ Entreg√°veis (Git): ‚Ä¢ [ ] Setup: Repo, venv, requirements.txt e conex√£o com Postgres. 
‚Ä¢ [ ] Tabela Users: Al√©m de login/senha, adicionar campos de perfil: 
target_course (Curso Alvo, ex: Medicina) e target_university (Universidade, ex: USP). 
‚Ä¢ [ ] Autentica√ß√£o: Rotas /auth/register e /auth/login (JWT). 
‚Ä¢ [ ] Rota de Perfil: PUT /profile para o aluno atualizar sua meta ou foto de perfil. 
M√™s 2: O Core (Envio e Corre√ß√£o) ‚Ä¢ Foco: O fluxo principal: enviar reda√ß√£o e receber nota. 
‚Ä¢ Entreg√°veis (Git): 
‚Ä¢ [ ] Tabela Essays (Reda√ß√µes): Campos para t√≠tulo, tema, texto (ou url do arquivo) e status (Pendente, Corrigida). 
‚Ä¢ [ ] CRUD de Reda√ß√µes: ‚Ä¢ POST /essays: Aluno envia a reda√ß√£o. 
‚Ä¢ GET /essays: Lista todas as reda√ß√µes do aluno logado. 
‚Ä¢ [ ] Simula√ß√£o de Corre√ß√£o: Criar uma rota (que seria usada pelo professor/admin) 
PUT /essays/{id}/grade que insere a Nota Final e o Coment√°rio. 
‚Ä¢ [ ] Valida√ß√£o: Impedir envio de reda√ß√£o com menos de 50 caracteres (regra de neg√≥cio). 
M√™s 3: Intelig√™ncia de Dados e Deploy ‚Ä¢ Foco: Mostrar ao aluno se ele est√° melhorando. 
‚Ä¢ Entreg√°veis (Git): ‚Ä¢ [ ] Rota de Dashboard: GET /dashboard/stats. 
‚Ä¢ L√≥gica: Deve retornar a M√©dia Geral das notas e a √öltima Nota." 
Para fazer as tabelas, eu decorei apenas as duas "Usu√°rios: Nome, Senha, Curso Alvo, Universidade Reda√ß√µes: Titulo, Tema, Texto, 
Status ", mas aonde entra as notas e esse tal de professore/admin?



ChatGPT - A estrutura que voc√™ memorizou cobre apenas o m√≠nimo (usu√°rios e reda√ß√µes), mas ela n√£o atende aos requisitos funcionais completos do projeto. Os requisitos mencionam nota, coment√°rio da corre√ß√£o, status, perfil do aluno, e tamb√©m que existe algu√©m que corrige (professor/admin).
Logo, precisamos modelar essas entidades no banco.
Abaixo segue o modelo completo, rigoroso e pronto para cria√ß√£o no Postgres.
1. TABELA users
Finalidade: Representa qualquer usu√°rio do sistema: aluno, professor ou admin.
O campo role resolve o problema do ‚Äúprofessor/admin‚Äù.
Campos essenciais:
id (PK)
name
email (√∫nico)
password_hash
role ‚Üí ENUM('student', 'teacher', 'admin')
target_course (somente usado se usu√°rio for aluno)
target_university (idem)
profile_photo_url (nullable)
created_at
Por que o role √© necess√°rio?
A rota /essays/{id}/grade deve aceitar somente professor/admin, ent√£o √© a tabela users que precisa armazenar esse tipo de perfil.
    2. TABELA essays
Finalidade: Reda√ß√µes enviadas pelos alunos.
Campos essenciais:
id (PK)
student_id (FK ‚Üí users.id, apenas users com role='student')
title
topic
text ou file_url
status ‚Üí ENUM('pending', 'graded')
created_at
updated_at
    3. TABELA essay_grades
Finalidade: Aqui entram as notas e coment√°rios, porque o requisito diz:
‚Äúinserir a Nota Final e o Coment√°rio‚Äù.
Separar isso em outra tabela √© a arquitetura mais limpa:
Cada reda√ß√£o pode ser corrigida uma vez, mas no futuro pode ser necess√°rio hist√≥rico, revis√µes, etc.
Campos essenciais:
id (PK)
essay_id (FK ‚Üí essays.id)
graded_by (FK ‚Üí users.id, apenas role teacher/admin)
final_grade (NUMERIC ou INTEGER conforme a nota)
comments (TEXT)
graded_at
Por que uma tabela separada?
Porque:
mant√©m rastreabilidade: quem corrigiu
evita poluir a tabela principal
facilita evolu√ß√µes futuras (mais de uma corre√ß√£o por reda√ß√£o, hist√≥rico, rubricas etc.)
    4. Como isso responde √† sua d√∫vida?
Onde entram as notas?
Na tabela essay_grades:
final_grade
comments
graded_at
Onde entra o professor/admin?
Na pr√≥pria tabela users, usando o campo role.
Um professor/admin corrige reda√ß√µes e, portanto, aparece no campo graded_by da tabela essay_grades.
    5. Esquema completo resumido
users
CampoTipoObserva√ß√µesidSERIAL PKnameVARCHARemailVARCHAR UNIQUEpassword_hashTEXTroleENUM(student, teacher, admin)target_courseVARCHARnullabletarget_universityVARCHARnullableprofile_photo_urlVARCHARnullablecreated_atTIMESTAMP
essays
CampoTipoObserva√ß√µesidSERIAL PKstudent_idINT FK ‚Üí users(id)titleVARCHARtopicVARCHARtextTEXTstatusENUM(pending, graded)created_atTIMESTAMPupdated_atTIMESTAMP
essay_grades
CampoTipoObserva√ß√µesidSERIAL PKessay_idINT FK ‚Üí essays(id)unique (1 corre√ß√£o por reda√ß√£o)graded_byINT FK ‚Üí users(id)(teacher/admin)final_gradeNUMERIC(4,2)commentsTEXTgraded_atTIMESTAMP
6. Dashboard
A rota /dashboard/stats pega dados de:
essay_grades.final_grade ‚Üí m√©dia geral.
essay_grades.graded_at ordenado ‚Üí √∫ltima nota.
Se quiser, eu posso gerar o script SQL completo, incluindo cria√ß√£o de ENUMs, constraints e chaves estrangeiras. Quer que eu gere?














